# Obsidian 云盘同步插件

## 开发状态：Beta 版本

> **注意**：此插件目前已进入 Beta 测试阶段。核心功能已实现并稳定运行，部分高级功能仍在持续开发中。欢迎测试使用并反馈，但在同步重要数据时请注意备份。

一款强大的 Obsidian 插件，支持将笔记自动同步到多种云盘服务，提供端到端加密保护，让您的笔记既安全又便捷。

![webdav](https://github.com/user-attachments/assets/e465e1d5-e0a6-4da5-928c-eb9ac5e33668)

## 核心功能

- **端到端加密**：所有文件在上传前使用 AES-256 加密，保护您的隐私
- **WebDAV 支持**：可通过 WebDAV 协议连接坚果云等服务，已实现完整同步功能
- **智能同步**：支持双向同步、本地到远程、远程到本地三种同步模式
- **自动同步**：文件变更时自动同步到云盘，支持增量同步以提高效率
- **定时同步**：支持设置定时同步间隔，可自定义同步频率
- **选择性同步**：可配置需要同步的文件类型和排除特定文件夹
- **完整操作支持**：支持文件创建、修改、删除、重命名等操作的同步
- **冲突处理**：提供多种冲突解决策略，支持保留本地版本、远程版本或最新版本

## 安装方法

> **注意**：由于插件处于测试阶段，目前仅支持从源码安装。未来稳定版将通过 Obsidian 插件市场发布。

### 从源码安装（适用于开发者和测试人员）

```
git clone https://github.com/ai-bytedance/obsidian-cloud-sync.git
cd obsidian-cloud-sync
npm install
npm run build
```

将生成的 main.js、manifest.json 和 styles.css 复制到您的 Obsidian 库的 .obsidian/plugins/cloud-sync/ 目录下。

## 初始配置

- 安装并启用插件后，点击插件设置
- 设置加密密钥（请妥善保管，丢失将无法恢复已加密文件）
- 选择要使用的云盘服务
- 配置相应的云盘凭据
- 设置同步文件夹路径和同步策略
- 点击"测试连接"按钮，确认连接成功后开始使用

## 当前支持的云盘服务

### WebDAV（坚果云等）
- 已完整实现，支持所有同步功能
- 支持多种WebDAV服务商，包括坚果云、NextCloud等
- 提供智能延迟功能，避免触发坚果云免费版API限制
- 需要配置WebDAV服务器地址、用户名和密码

### GitHub
- 测试阶段，支持基本同步功能
- 使用GitHub仓库存储数据，支持公开和私有仓库
- 需要配置GitHub用户令牌和仓库信息

### 计划支持的其他服务

#### Google Drive
- 需要在[Google Cloud Console](https://console.cloud.google.com/)创建项目
- 配置 OAuth 客户端 ID 和客户端密钥
- **开发状态**：规划中

#### OneDrive
- 需要在[Microsoft Azure Portal](https://portal.azure.com/)注册应用
- 配置客户端 ID 和客户端密钥
- **开发状态**：规划中

#### iCloud
- 需要获取 iCloud API Token 和 Key ID
- 配置 CloudKit 容器和环境
- **开发状态**：规划中


## 注意事项

- **Beta 版本说明**：当前版本已经过初步测试，但可能仍有部分功能不稳定
- **加密密钥安全**：请务必备份您的加密密钥，密钥丢失将导致无法恢复已加密文件
- **网络依赖**：同步功能依赖网络连接，请确保网络稳定
- **API 限制**：云盘 API 可能有调用频率和流量限制，过于频繁的同步可能触发限制
- **大文件同步**：大文件同步可能需要较长时间，请耐心等待
- **冲突处理**：可在高级设置中选择您偏好的冲突处理策略


## 常见问题

### 为什么插件还不在 Obsidian 插件市场？

插件目前处于Beta测试阶段，功能和稳定性仍在优化中。一旦达到稳定版本将提交到 Obsidian 插件市场审核。

### 授权失败怎么办？

- 确认您的凭据正确无误
- 检查网络连接是否正常
- 检查服务器地址是否包含完整的协议前缀（如https://）
- 若为WebDAV，确认路径末尾是否需要斜杠
- 尝试重新授权

### 同步失败怎么办？

- 检查网络连接
- 确认云盘空间是否充足
- 查看控制台错误日志
- 尝试重新授权云盘
- 尝试更改同步策略
- 重启 Obsidian 后再试

### 如何更换加密密钥？

更换加密密钥会导致无法解密之前加密的文件，建议：

- 先备份所有文件
- 更改加密密钥
- 重新同步所有文件

### 如何在多设备间使用？

- 在每台设备上安装插件
- 使用相同的云盘账号和加密密钥
- 配置相同的同步设置
- 推荐使用双向同步模式

## 捐赠支持

插件开发者为这款插件付出了大量的时间与精力。如果你觉得这个插件很有用，就支持一下开发吧！

![merged_qr](https://github.com/user-attachments/assets/4f302ecd-b8ea-4930-9980-35b8943ddb0e)
![企业微信截图_20250312104609](https://github.com/user-attachments/assets/1a6d5d0c-4714-41e5-b0fe-363b86761c8a)

